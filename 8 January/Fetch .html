<!DOCTYPE html>
<html lang="en">
<head>
    <title>Fetch</title>    
</head>
<body>
   
    <div>
        <h2>Fetch !!</h2>
        <table id="users"></table>
      </div>
    <script>
        //get method
       
 fetch("https://jsonplaceholder.typicode.com/users")
    .then(response => response.json())
    .then(json => {
    let li = `<tr><th>Name</th><th>Email</th><th>userName</th></tr>`;
    json.forEach(user => {
        li += `<tr>
            <td>${user.name} </td>
            <td>${user.email}</td>		
            <td>${user.username}</td>		
        </tr>`;
    });
document.getElementById("users").innerHTML = li;
});
    //post method


fetch("https://jsonplaceholder.typicode.com/posts", {
	method: "POST",
	body: JSON.stringify({
		title: "muthu",
		body: "mani",
		userId: 11,
        id: 101
	}),
	headers: {
		"Content-type": "application/json"
	}
})
.then(response => response.json())
.then(json => console.log(json));

    //put method
class EasyHTTP {
async put(url, data) {
	const response = await fetch(url, {
	method: 'PUT',
	headers: {
		'Content-type': 'application/json'
	},
	body: JSON.stringify(data)
	});
		const resData = await response.json();
	return resData;
}
}
const http = new EasyHTTP;
const data = {
	name: 'sunny yadav',
	username: 'sunnyyadav',
	email: 'sunny@gmail.com'
}
http.put(
'https://jsonplaceholder.typicode.com/users/2',
	data)

.then(data => console.log(data))
.catch(err => console.log(err));

   //Delete method
class DeleteHTTP {
async delete(url) {
    const response = await fetch(url, {
        method: 'DELETE',
        headers: {
            'Content-type': 'application/json'
        }
    });

    const resData = 'resource deleted...';
    return resData;
}
}
const http = new DeleteHTTP;
http.delete('https://jsonplaceholder.typicode.com/users/2')
.then(data => console.log(data))
.catch(err => console.log(err));

        async function getdata() {
            try{
               const response=await fetch('https://jsonplaceholder.typicode.com/user');
               if(!response.ok){
                const message = 'Error with status code:' +response.status;
                throw new error(message);
               }
               const data = await response.json();
               console.log(data);
            }
            catch(error){
                console.log('Error:' +err);
            }
        }

    </script>
</body>
</html>
